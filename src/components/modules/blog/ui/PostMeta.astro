---
import Grid from "@components/Tools/Grid.astro";
import Link from "@components/ui/Link.astro";
interface Props {
  publishedAt: Date | null;
  readingTime?: string | null;
  // ðŸ‘‡ Ajout de la prop authors (tableau)
  authors?: { name: string; slug: string; avatar?: string | null }[]; 
  lang: string;
  className?: string;
}

const { publishedAt, readingTime, authors = [], lang, className = "" } = Astro.props;
---

<Grid display="flex" alignItems="center" gap="var(--space-1)" className={`post-meta ${className}`}>
  
  {/* DATE */}
  {publishedAt && (
    <time datetime={publishedAt.toISOString()} class="whitespace-nowrap">
      {publishedAt.toLocaleDateString(lang, { day: 'numeric', month: 'long', year: 'numeric' })}
    </time>
  )}

  {/* TEMPS DE LECTURE */}
  {readingTime && (
    <>
      <span class="meta-sep">â€¢</span>
      <span class="whitespace-nowrap">{readingTime}</span>
    </>
  )}

  {/* AUTEURS */}
  {authors && authors.length > 0 && (
    <>
      <span class="meta-sep">â€¢</span>
      <div class="meta-authors">
        <span>Par</span>
        {authors.map((author, index) => (
          <>
            {index > 0 && <span>, </span>}
            <Link 
              href={`/${lang}/blog/auteur/${author.slug}`} 
              className="author-link"
              style="link"
              transition:name="author"
            >
              {author.name}
            </Link>
          </>
        ))}
      </div>
    </>
  )}
  
</div>