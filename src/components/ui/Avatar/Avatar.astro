---
interface Props {
  variant?: "initial" | "retro" | "modern" | "futuristic";
  src?: string;
  alt?: string;
  fallback?: string;
  size?: "sm" | "md" | "lg" | "xl";
  className?: string;
  direction?: "row" | "column";
}

const {
  variant = "initial",
  src,
  alt = "Avatar",
  fallback,
  size = "md",
  className = "",
  direction = "row",
} = Astro.props;

const classes = [
  "avatar",
  variant !== "initial" && variant,
  size !== "md" && `avatar-${size}`,
  direction && `avatar-${direction}`,
  className,
]
  .filter(Boolean)
  .join(" ");

// Générer les initiales du fallback si c'est un nom complet
const getInitials = (text: string | undefined): string => {
  if (!text) return "?";
  return text
    .split(" ")
    .map(word => word[0])
    .join("")
    .toUpperCase()
    .slice(0, 2);
};

const displayFallback = fallback ? getInitials(fallback) : undefined;
---

<div class={classes}>
  {src ? (
    <img src={src} alt={alt} />
  ) : (
    displayFallback || "?"
  )}
</div>
