---
/**
 * Tooltip - Composant pour afficher des infobulles au survol (pur CSS)
 * 
 * Affiche une infobulle contextuelle avec positionnement CSS uniquement.
 * 
 * @param {string} variant - Style variant (initial|retro|modern|futuristic)
 * @param {string} color - Couleur (default|primary|secondary|accent)
 * @param {string} text - Texte de l'infobulle (requis)
 * @param {string} position - Position du tooltip (top|bottom|left|right)
 * @param {string} className - Classes CSS additionnelles
 */

interface Props {
  variant?: 'initial' | 'retro' | 'modern' | 'futuristic';
  color?: 'default' | 'primary' | 'secondary' | 'accent';
  text: string;
  position?: 'top' | 'bottom' | 'left' | 'right';
  className?: string;
}

const {
  variant = 'initial',
  color = 'default',
  text,
  position = 'top',
  className = '',
} = Astro.props;

const variantClass = variant !== 'initial' ? variant : '';
const colorClass = color !== 'default' ? color : '';

const classes = [
  'tooltip',
  `tooltip-${position}`,
  variantClass,
  colorClass,
  className,
].filter(Boolean).join(' ');
---

<span class={classes}>
  <slot />
  <span class="tooltiptext">{text}</span>
</span>

<style>
  /* Container tooltip */
  .tooltip {
    position: relative;
    display: inline-flex;
    align-items: center;
    cursor: help;
  }

  /* Texte du tooltip */
  .tooltiptext {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    z-index: 9999;
    padding: var(--tooltip-padding-y) var(--tooltip-padding-x);
    background: var(--tooltip-bg);
    color: var(--tooltip-color);
    font-size: var(--tooltip-font-size);
    border-radius: var(--tooltip-border-radius);
    box-shadow: var(--shadow-md);
    white-space: nowrap;
    transition: opacity 0.2s, visibility 0.2s;
    pointer-events: none;
  }

  /* Afficher au hover */
  .tooltip:hover .tooltiptext,
  .tooltip:focus-within .tooltiptext {
    visibility: visible;
    opacity: 1;
  }

  /* Arrow du tooltip */
  .tooltiptext::after {
    content: '';
    position: absolute;
    border: 5px solid transparent;
  }

  /* Position TOP (d√©faut) */
  .tooltip-top .tooltiptext {
    bottom: 110%;
    left: 50%;
    transform: translateX(-50%);
  }
  
  .tooltip-top .tooltiptext::after {
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-top-color: var(--tooltip-bg);
  }

  /* Position BOTTOM */
  .tooltip-bottom .tooltiptext {
    top: 110%;
    left: 50%;
    transform: translateX(-50%);
  }
  
  .tooltip-bottom .tooltiptext::after {
    bottom: 100%;
    left: 50%;
    margin-left: -5px;
    border-bottom-color: var(--tooltip-bg);
  }

  /* Position LEFT */
  .tooltip-left .tooltiptext {
    top: 50%;
    right: 110%;
    transform: translateY(-50%);
  }
  
  .tooltip-left .tooltiptext::after {
    top: 50%;
    left: 100%;
    margin-top: -5px;
    border-left-color: var(--tooltip-bg);
  }

  /* Position RIGHT */
  .tooltip-right .tooltiptext {
    top: 50%;
    left: 110%;
    transform: translateY(-50%);
  }
  
  .tooltip-right .tooltiptext::after {
    top: 50%;
    right: 100%;
    margin-top: -5px;
    border-right-color: var(--tooltip-bg);
  }
</style>
