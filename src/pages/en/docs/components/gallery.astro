---
import DocLayout from "@layouts/DocLayout.astro";
import { Code } from "astro:components";
import GalleryComponent from "@components/ui/Gallery.astro";
import TOC from "@components/templates/docs/TableOfContents.astro";
import Alert from "@components/ui/Alert.astro";
import Table from "@components/ui/Table/Table.astro";
import TableBody from "@components/ui/Table/TableBody.astro";
import TableCell from "@components/ui/Table/TableCell.astro";
import TableHead from "@components/ui/Table/TableHead.astro";
import TableHeader from "@components/ui/Table/TableHeader.astro";
import TableRow from "@components/ui/Table/TableRow.astro";

const sampleImages = [
  { src: "https://picsum.photos/400/400?random=1", alt: "Image 1", caption: "Beautiful Landscape" },
  { src: "https://picsum.photos/400/400?random=2", alt: "Image 2", caption: "City Lights" },
  { src: "https://picsum.photos/400/400?random=3", alt: "Image 3", caption: "Nature Scene" },
  { src: "https://picsum.photos/400/400?random=4", alt: "Image 4", caption: "Abstract Art" },
  { src: "https://picsum.photos/400/400?random=5", alt: "Image 5", caption: "Sunset View" },
  { src: "https://picsum.photos/400/400?random=6", alt: "Image 6", caption: "Mountain Peak" },
];

const productImages = [
  { 
    src: "https://picsum.photos/800/600?random=10", 
    thumb: "https://picsum.photos/100/100?random=10",
    alt: "Product View 1" 
  },
  { 
    src: "https://picsum.photos/800/600?random=11", 
    thumb: "https://picsum.photos/100/100?random=11",
    alt: "Product View 2" 
  },
  { 
    src: "https://picsum.photos/800/600?random=12", 
    thumb: "https://picsum.photos/100/100?random=12",
    alt: "Product View 3" 
  },
  { 
    src: "https://picsum.photos/800/600?random=13", 
    thumb: "https://picsum.photos/100/100?random=13",
    alt: "Product View 4" 
  },
];

const masonryImages = [
  { src: "https://picsum.photos/400/300?random=20", alt: "Masonry 1", caption: "Portrait" },
  { src: "https://picsum.photos/400/600?random=21", alt: "Masonry 2", caption: "Tall Image" },
  { src: "https://picsum.photos/400/400?random=22", alt: "Masonry 3", caption: "Square" },
  { src: "https://picsum.photos/400/500?random=23", alt: "Masonry 4", caption: "Medium" },
  { src: "https://picsum.photos/400/350?random=24", alt: "Masonry 5", caption: "Wide" },
  { src: "https://picsum.photos/400/450?random=25", alt: "Masonry 6", caption: "Landscape" },
];
---

<DocLayout 
  title="Gallery Component" 
  description="Image gallery component with 4 modes and pure CSS variants (ZERO JavaScript)" 
  variant="initial"
>
  <h1 id="gallery-component">Gallery Component</h1>

  <p>
    The <code class="inline-code">Gallery</code> component offers 4 different modes with pure CSS:
    <strong>Grid</strong>, <strong>Masonry</strong>, <strong>Product</strong> (with checkbox hack), and <strong>Enhanced</strong>.
  </p>

  <TOC
    items={[
      { label: "Installation", href: "#installation" },
      { label: "Grid Mode", href: "#grid" },
      { label: "Masonry Mode", href: "#masonry" },
      { label: "Product Mode (Checkbox Hack)", href: "#product" },
      { label: "Enhanced Mode", href: "#enhanced" },
      { label: "Variants", href: "#variants" },
      { label: "API Reference", href: "#api" },
    ]}
    title="Table of Contents"
  />

  <h2 id="installation">Installation</h2>

  <Code
    lang="astro"
    code={`import Gallery from '@components/ui/Gallery.astro';`}
  />

  <h2 id="grid">Grid Mode</h2>
  <p>Classic grid with equal columns and uniform aspect ratio.</p>

  <div class="demo-section">
    <GalleryComponent 
      images={sampleImages}
      mode="grid"
      columns={3}
      aspectRatio="1/1"
      showCaptions={true}
    />
  </div>

  <Code
    lang="astro"
    code={`<GalleryComponent 
  images={sampleImages}
  mode="grid"
  columns={3}
  aspectRatio="1/1"
  showCaptions={true}
/>`}
  />

  <h2 id="masonry">Masonry Mode</h2>
  <p>Column layout with variable heights (like Pinterest).</p>

  <div class="demo-section">
    <GalleryComponent 
      images={masonryImages}
      mode="masonry"
      columns={3}
      showCaptions={true}
    />
  </div>

  <Code
    lang="astro"
    code={`<GalleryComponent 
  images={masonryImages}
  mode="masonry"
  columns={3}
  showCaptions={true}
/>`}
  />

  <h2 id="product">Product Mode (Checkbox Hack - Pure CSS)</h2>
  <p>
    Product gallery with main image and thumbnails.
    <strong>ZERO JavaScript</strong> - uses the checkbox hack with hidden <code class="inline-code">&lt;input type=\"radio\"&gt;</code> and <code class="inline-code">&lt;label&gt;</code>.
  </p>

  <div class="demo-section">
    <GalleryComponent 
      images={productImages}
      mode="product"
    />
  </div>

  <Code
    lang="astro"
    code={`<GalleryComponent 
  images={productImages}
  mode="product"
/>`}
  />

  <h2 id="enhanced">Enhanced Mode</h2>
  <p>Grid with hover overlay showing a zoom icon and caption.</p>

  <div class="demo-section">
    <GalleryComponent 
      images={sampleImages}
      mode="enhanced"
      columns={3}
      showCaptions={true}
    />
  </div>

  <Code
    lang="astro"
    code={`<GalleryComponent 
  images={sampleImages}
  mode="enhanced"
  columns={3}
  showCaptions={true}
/>`}
  />

  <h2 id="variants">Variants</h2>

  <h3>Retro Variant</h3>
  <div class="demo-section">
    <GalleryComponent 
      images={sampleImages.slice(0, 4)}
      variant="retro"
      mode="grid"
      columns={2}
    />
  </div>

  <Code
    lang="astro"
    code={`<GalleryComponent 
  images={sampleImages}
  variant="retro"
  mode="grid"
  columns={2}
/>`}
  />

  <h3>Modern Variant</h3>
  <div class="demo-section">
    <GalleryComponent 
      images={sampleImages.slice(0, 4)}
      variant="modern"
      mode="grid"
      columns={2}
    />
  </div>

  <Code
    lang="astro"
    code={`<GalleryComponent 
  images={sampleImages}
  variant="modern"
  mode="grid"
  columns={2}
/>`}
  />

  <h3>Futuristic Variant</h3>
  <div class="demo-section">
    <GalleryComponent 
      images={sampleImages.slice(0, 4)}
      variant="futuristic"
      mode="grid"
      columns={2}
    />
  </div>

  <Code
    lang="astro"
    code={`<GalleryComponent 
  images={sampleImages}
  variant="futuristic"
  mode="grid"
  columns={2}
/>`}
  />

  <h3>Product Gallery with Variants</h3>
  <div class="demo-section">
    <h4>Retro Product</h4>
    <GalleryComponent 
      images={productImages}
      variant="retro"
      mode="product"
    />
  </div>

  <div class="demo-section">
    <h4>Modern Product</h4>
    <GalleryComponent 
      images={productImages}
      variant="modern"
      mode="product"
    />
  </div>

  <div class="demo-section">
    <h4>Futuristic Product</h4>
    <GalleryComponent 
      images={productImages}
      variant="futuristic"
      mode="product"
    />
  </div>

  <h2 id="api">API Reference</h2>

  <h3>Props</h3>

  <div class="props-table">
    <Table variant="initial">
      <TableHeader>
        <TableRow>
          <TableHead>Prop</TableHead>
          <TableHead>Type</TableHead>
          <TableHead>Défaut</TableHead>
          <TableHead>Description</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        <TableRow>
          <TableCell><code>images</code></TableCell>
          <TableCell><code>GalleryImage[]</code></TableCell>
          <TableCell><code>[]</code></TableCell>
          <TableCell>Array of images to display</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code>variant</code></TableCell>
          <TableCell><code>"initial" | "retro" | "modern" | "futuristic"</code></TableCell>
          <TableCell><code>"initial"</code></TableCell>
          <TableCell>Visual style of the gallery</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code>mode</code></TableCell>
          <TableCell><code>"grid" | "masonry" | "product" | "enhanced"</code></TableCell>
          <TableCell><code>"grid"</code></TableCell>
          <TableCell>Gallery display mode</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code>columns</code></TableCell>
          <TableCell><code>2 | 3 | 4 | 5 | 6</code></TableCell>
          <TableCell><code>3</code></TableCell>
          <TableCell>Number of columns (grid/masonry)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code>gap</code></TableCell>
          <TableCell><code>string</code></TableCell>
          <TableCell><code>"1rem"</code></TableCell>
          <TableCell>Spacing between images</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code>aspectRatio</code></TableCell>
          <TableCell><code>string</code></TableCell>
          <TableCell><code>"1/1"</code></TableCell>
          <TableCell>Image ratio (grid/enhanced)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code>showCaptions</code></TableCell>
          <TableCell><code>boolean</code></TableCell>
          <TableCell><code>true</code></TableCell>
          <TableCell>Show captions</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code>class</code></TableCell>
          <TableCell><code>string</code></TableCell>
          <TableCell>-</TableCell>
          <TableCell>Additional CSS classes</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </div>

  <h3>GalleryImage Interface</h3>

  <Code
    lang="typescript"
    code={`interface GalleryImage {
  src: string;        // Image URL
  alt?: string;       // Alt text
  caption?: string;   // Image caption
  thumb?: string;     // Thumbnail URL (for product mode)
}`}
  />

  <h2>Pure CSS Architecture</h2>

  <p>
    The <strong>product</strong> mode uses the <strong>checkbox hack</strong> to change images without JavaScript:
  </p>

  <ul>
    <li><code>&lt;input type="radio"&gt;</code> hidden to store state (active image)</li>
    <li><code>&lt;label for="..."&gt;</code> on each thumbnail to change the radio</li>
    <li>CSS selector <code>:checked</code> to show the corresponding image</li>
    <li>CSS transitions for smooth animations</li>
  </ul>

  <Code
    lang="css"
    code={`/* Cacher les radios */
.gallery-radio {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

/* Afficher l'image quand radio cochée */
.gallery-radio:nth-of-type(1):checked ~ .main-image .main-img-0 {
  opacity: 1;
}

/* Style actif sur la miniature */
.gallery-radio:nth-of-type(1):checked ~ .thumbnails .thumb-label:nth-of-type(1) {
  border-color: var(--color-primary);
}`}
  />

  <Alert variant="initial" status="info">
    <strong>Note:</strong> ZERO JavaScript! Everything works with hidden radios and the <code>:checked</code> selector.
  </Alert>
</DocLayout>