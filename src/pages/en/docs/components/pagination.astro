---
import DocLayout from "@layouts/DocLayout.astro";
import { Code } from "astro:components";
import PaginationComponent from "@components/ui/Pagination.astro";
import TableOfContents from "@/components/templates/docs/TableOfContents.astro";
import Table from "@components/ui/Table/Table.astro";
import TableHeader from "@components/ui/Table/TableHeader.astro";
import TableBody from "@components/ui/Table/TableBody.astro";
import TableRow from "@components/ui/Table/TableRow.astro";
import TableHead from "@components/ui/Table/TableHead.astro";
import TableCell from "@components/ui/Table/TableCell.astro";
---

<DocLayout 
  title="Pagination Component" 
  description="Pagination component documentation for page navigation"
  variant="initial"
>
  <h1 id="pagination-component">Pagination Component</h1>
  
  <p>
    The <code class="inline-code">Pagination</code> component allows navigation between multiple content pages
    with smart handling of page numbers and navigation buttons.
  </p>

  <TableOfContents
    items={[
      { label: "Installation", href: "#installation" },
      { label: "Props", href: "#props" },
      { label: "Basic usage", href: "#basic" },
      { label: "Variants", href: "#variants" },
      { label: "Colors", href: "#colors" },
      { label: "Sizes", href: "#sizes" },
      { label: "Advanced options", href: "#options" },
      { label: "Accessibility", href: "#accessibility" },
    ]}
    title="Table of contents"
  />

  <h2 id="installation">Installation</h2>

  <Code
    lang="astro"
    code={`import Pagination from '@components/ui/Pagination.astro';`}
  />

  <h2 id="props">Props</h2>

  <div class="props-table">
    <Table striped>
      <TableHeader>
        <TableRow>
          <TableHead>Prop</TableHead>
          <TableHead>Type</TableHead>
          <TableHead>Default</TableHead>
          <TableHead>Description</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        <TableRow>
          <TableCell><code class="inline-code">currentPage</code></TableCell>
          <TableCell>number</TableCell>
          <TableCell>-</TableCell>
          <TableCell>Current page (1-based, required)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">totalPages</code></TableCell>
          <TableCell>number</TableCell>
          <TableCell>-</TableCell>
          <TableCell>Total number of pages (required)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">baseUrl</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>"#"</TableCell>
          <TableCell>Base URL for links</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">variant</code></TableCell>
          <TableCell>initial | retro | modern | futuristic</TableCell>
          <TableCell>initial</TableCell>
          <TableCell>Visual style of the pagination</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">color</code></TableCell>
          <TableCell>default | primary | secondary | accent</TableCell>
          <TableCell>default</TableCell>
          <TableCell>Active page color</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">size</code></TableCell>
          <TableCell>sm | md | lg</TableCell>
          <TableCell>md</TableCell>
          <TableCell>Button size</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">showPrevNext</code></TableCell>
          <TableCell>boolean</TableCell>
          <TableCell>true</TableCell>
          <TableCell>Show previous/next buttons</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">showFirstLast</code></TableCell>
          <TableCell>boolean</TableCell>
          <TableCell>false</TableCell>
          <TableCell>Show first/last page buttons</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">siblingCount</code></TableCell>
          <TableCell>number</TableCell>
          <TableCell>1</TableCell>
          <TableCell>Number of pages on each side of the current page</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">className</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>""</TableCell>
          <TableCell>Additional CSS classes</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </div>

  <h2 id="basic">Basic usage</h2>

  <p>Simple example with 10 pages, page 5 active:</p>

  <div class="example-section">
    <PaginationComponent currentPage={5} totalPages={10} />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent currentPage={5} totalPages={10} />`}
  />

  <h3>Automatic edge case handling</h3>

  <p>Page 1 (no previous button):</p>
  <div class="example-section">
    <PaginationComponent currentPage={1} totalPages={10} />
  </div>

  <p>Page 10 (no next button):</p>
  <div class="example-section">
    <PaginationComponent currentPage={10} totalPages={10} />
  </div>

  <p>Single page (no navigation):</p>
  <div class="example-section">
    <PaginationComponent currentPage={1} totalPages={1} />
  </div>

  <Code
    lang="astro"
    code={`<!-- Automatic disabling based on context -->
<PaginationComponent currentPage={1} totalPages={10} />
<PaginationComponent currentPage={10} totalPages={10} />
<PaginationComponent currentPage={1} totalPages={1} />`}
  />

  <h2 id="variants">Variants</h2>

  <h3>Initial (défaut)</h3>
  <div class="example-section">
    <PaginationComponent variant="initial" currentPage={3} totalPages={10} />
  </div>

  <h3>Retro</h3>
  <div class="example-section">
    <PaginationComponent variant="retro" currentPage={3} totalPages={10} />
  </div>

  <h3>Modern</h3>
  <div class="example-section">
    <PaginationComponent variant="modern" currentPage={3} totalPages={10} />
  </div>

  <h3>Futuristic</h3>
  <div class="example-section">
    <PaginationComponent variant="futuristic" currentPage={3} totalPages={10} />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent variant="initial" currentPage={3} totalPages={10} />
<PaginationComponent variant="retro" currentPage={3} totalPages={10} />
<PaginationComponent variant="modern" currentPage={3} totalPages={10} />
<PaginationComponent variant="futuristic" currentPage={3} totalPages={10} />`}
  />

  <h2 id="colors">Colors</h2>

  <p>Colors apply to the active page:</p>

  <div class="example-section">
    <div style="display: flex; flex-direction: column; gap: 2rem;">
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Default</p>
        <PaginationComponent color="default" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Primary</p>
        <PaginationComponent color="primary" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Secondary</p>
        <PaginationComponent color="secondary" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Accent</p>
        <PaginationComponent color="accent" currentPage={5} totalPages={10} />
      </div>
    </div>
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent color="default" currentPage={5} totalPages={10} />
<PaginationComponent color="primary" currentPage={5} totalPages={10} />
<PaginationComponent color="secondary" currentPage={5} totalPages={10} />
<PaginationComponent color="accent" currentPage={5} totalPages={10} />`}
  />

  <h2 id="sizes">Sizes</h2>

  <div class="example-section">
    <div style="display: flex; flex-direction: column; gap: 2rem;">
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Small</p>
        <PaginationComponent size="sm" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Medium (default)</p>
        <PaginationComponent size="md" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Large</p>
        <PaginationComponent size="lg" currentPage={5} totalPages={10} />
      </div>
    </div>
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent size="sm" currentPage={5} totalPages={10} />
<PaginationComponent size="md" currentPage={5} totalPages={10} />
<PaginationComponent size="lg" currentPage={5} totalPages={10} />`}
  />

  <h2 id="options">Advanced options</h2>

  <h3>With first/last page buttons</h3>
  <div class="example-section">
    <PaginationComponent currentPage={5} totalPages={20} showFirstLast={true} />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent currentPage={5} totalPages={20} showFirstLast={true} />`}
  />

  <h3>Without previous/next buttons</h3>
  <div class="example-section">
    <PaginationComponent currentPage={5} totalPages={10} showPrevNext={false} />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent currentPage={5} totalPages={10} showPrevNext={false} />`}
  />

  <h3>More visible pages (siblingCount)</h3>
  <div class="example-section">
    <div style="display: flex; flex-direction: column; gap: 2rem;">
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">siblingCount={1} (default)</p>
        <PaginationComponent currentPage={10} totalPages={20} siblingCount={1} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">siblingCount={2}</p>
        <PaginationComponent currentPage={10} totalPages={20} siblingCount={2} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">siblingCount={3}</p>
        <PaginationComponent currentPage={10} totalPages={20} siblingCount={3} />
      </div>
    </div>
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent currentPage={10} totalPages={20} siblingCount={1} />
<PaginationComponent currentPage={10} totalPages={20} siblingCount={2} />
<PaginationComponent currentPage={10} totalPages={20} siblingCount={3} />`}
  />

  <h3>Smart display with "..."</h3>
  <p>The component automatically displays "..." when there are many pages:</p>
  
  <div class="example-section">
    <div style="display: flex; flex-direction: column; gap: 2rem;">
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Start (page 2)</p>
        <PaginationComponent currentPage={2} totalPages={50} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Middle (page 25)</p>
        <PaginationComponent currentPage={25} totalPages={50} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">End (page 49)</p>
        <PaginationComponent currentPage={49} totalPages={50} />
      </div>
    </div>
  </div>

  <h3>Custom URL</h3>
  <Code
    lang="astro"
    code={`<!-- With pattern [page] -->
<PaginationComponent 
  currentPage={5} 
  totalPages={10} 
  baseUrl="/blog/page/[page]" 
/> 
<!-- Result: /blog/page/1, /blog/page/2, etc. -->

<!-- With simple concatenation -->
<PaginationComponent 
  currentPage={5} 
  totalPages={10} 
  baseUrl="/blog/page/" 
/> 
<!-- Result: /blog/page/1, /blog/page/2, etc. -->`}
  />

  <h2 id="accessibility">Accessibility</h2>

  <ul>
    <li><strong>Semantic navigation:</strong> Uses <code class="inline-code">&lt;nav&gt;</code> with <code class="inline-code">aria-label="Pagination"</code></li>
    <li><strong>Current state:</strong> <code class="inline-code">aria-current="page"</code> on the active page</li>
    <li><strong>Disabling:</strong> <code class="inline-code">aria-disabled</code> and <code class="inline-code">tabindex="-1"</code> on disabled links</li>
    <li><strong>Clear labels:</strong> <code class="inline-code">aria-label</code> on all links (First page, Page 5, etc.)</li>
    <li><strong>Keyboard:</strong> Full keyboard navigation with Tab</li>
    <li><strong>Smart handling:</strong> Automatic disabling if totalPages = 0, 1, or if currentPage is invalid</li>
  </ul>

  <h2>Smart logic</h2>

  <ul>
    <li><strong>0 pages:</strong> Nothing is displayed</li>
    <li><strong>1 page:</strong> Only page 1 is shown (no navigation)</li>
    <li><strong>≤ 7 pages:</strong> All pages are shown</li>
    <li><strong>&gt; 7 pages:</strong> Uses "..." smartly</li>
    <li><strong>Validation:</strong> currentPage is automatically normalized between 1 and totalPages</li>
    <li><strong>Previous button:</strong> Automatically disabled on page 1</li>
    <li><strong>Next button:</strong> Automatically disabled on the last page</li>
  </ul>

  <h2>Full example</h2>

  <div class="example-section">
    <PaginationComponent 
      variant="modern"
      color="primary"
      size="lg"
      currentPage={12}
      totalPages={50}
      showFirstLast={true}
      siblingCount={2}
    />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent 
  variant="modern"
  color="primary"
  size="lg"
  currentPage={12}
  totalPages={50}
  showFirstLast={true}
  siblingCount={2}
  baseUrl="/blog/page/[page]"
/>`}
  />

  <h2>Usage with Astro</h2>

  <Code
    lang="astro"
    code={`---
// pages/blog/[page].astro
import Pagination from '@components/ui/Pagination.astro';

const currentPage = Number(Astro.params.page || 1);
const postsPerPage = 10;
const totalPosts = 245;
const totalPages = Math.ceil(totalPosts / postsPerPage);

const posts = await getPostsForPage(currentPage, postsPerPage);
---

<div>
  {posts.map(post => (
    <article>{post.title}</article>
  ))}
</div>

<PaginationComponent 
  currentPage={currentPage}
  totalPages={totalPages}
  baseUrl="/blog/"
  variant="modern"
  color="primary"
/>`}
  />
</DocLayout>