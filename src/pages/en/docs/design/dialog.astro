---
import DocLayout from "@layouts/DocLayout.astro";
import { Code } from "astro:components";
import TableOfContents from "@/components/templates/docs/TableOfContents.astro";
import DialogComponent from "@/components/ui/Dialog/Dialog.astro";
import DialogTrigger from "@/components/ui/Dialog/DialogTrigger.astro";
import DialogContent from "@/components/ui/Dialog/DialogContent.astro";
import DialogHeader from "@/components/ui/Dialog/DialogHeader.astro";
import DialogFooter from "@/components/ui/Dialog/DialogFooter.astro";
import DialogTitle from "@/components/ui/Dialog/DialogTitle.astro";
import DialogDescription from "@/components/ui/Dialog/DialogDescription.astro";
import DialogClose from "@/components/ui/Dialog/DialogClose.astro";
import Button from "@components/ui/Button.astro";
---

<DocLayout 
  title="Dialog Component" 
  description="Composable modal dialog box using the native <dialog> HTML element" 
  variant="initial"
>
  <h1 id="dialog-component">Dialog Component</h1>

  <p>
    The <code class="inline-code">Dialog</code> component uses the native <code class="inline-code">&lt;dialog&gt;</code> HTML element to create accessible and performant modal windows. Composable architecture with subcomponents for maximum flexibility.
  </p>

  <TableOfContents
    items={[
      { label: "Installation", href: "#installation" },
      { label: "Basic usage", href: "#basic" },
      { label: "Variants", href: "#variants" },
      { label: "Sizes", href: "#sizes" },
      { label: "With form", href: "#with-form" },
      { label: "External trigger", href: "#external-trigger" },
      { label: "API Reference", href: "#api" },
    ]}
    title="Table of Contents"
  />

  <h2 id="installation">Installation</h2>

  <Code
    lang="astro"
    code={`import {
  Dialog,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
  DialogClose,
} from '@components/ui/Dialog';`}
  />

  <h2 id="basic">Basic usage</h2>

  <div class="demo-section">
    <DialogComponent id="dialog-basic">
      <DialogTrigger for="dialog-basic">
        <Button>Open Dialog</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogClose for="dialog-basic">×</DialogClose>
        <DialogHeader>
          <DialogTitle>Basic Dialog</DialogTitle>
          <DialogDescription>
            This is a dialog using a pure CSS checkbox hack (zero JavaScript).
          </DialogDescription>
        </DialogHeader>
        <div style="padding: 1rem 0;">
          <p>Your dialog content goes here.</p>
        </div>
        <DialogFooter>
          <DialogClose for="dialog-basic">
            <Button>Close</Button>
          </DialogClose>
        </DialogFooter>
      </DialogContent>
    </DialogComponent>
  </div>

  <Code
    lang="astro"
    code={`<DialogComponent id="mon-dialog">
  <DialogTrigger for="mon-dialog">
    <Button>Ouvrir Dialog</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogClose for="mon-dialog">×</DialogClose>
    <DialogHeader>
      <DialogTitle>Dialog Basique</DialogTitle>
      <DialogDescription>
        Description du dialog.
      </DialogDescription>
    </DialogHeader>
    <div>Contenu du dialog</div>
    <DialogFooter>
      <DialogClose for="mon-dialog">
        <Button>Fermer</Button>
      </DialogClose>
    </DialogFooter>
  </DialogContent>
</DialogComponent>`}
  />

  <h2 id="variants">Variants</h2>

  <h3>Initial</h3>
  <div class="demo-section">
    <DialogComponent variant="initial" id="dialog-initial">
      <DialogTrigger for="dialog-initial">
        <Button>Initial</Button>
      </DialogTrigger>
      <DialogContent variant="initial">
        <DialogHeader>
          <DialogTitle>Initial Dialog</DialogTitle>
          <DialogDescription>
            Simple and clean style.
          </DialogDescription>
        </DialogHeader>
        <div style="padding: 1rem 0;">
          <p>Dialog content with the initial variant.</p>
        </div>
        <DialogFooter>
          <DialogClose for="dialog-initial">
            <Button>Close</Button>
          </DialogClose>
        </DialogFooter>
      </DialogContent>
    </DialogComponent>
  </div>

  <h3>Retro</h3>
  <div class="demo-section">
    <DialogComponent variant="retro" id="dialog-retro">
      <DialogTrigger for="dialog-retro">
        <Button variant="retro">Retro</Button>
      </DialogTrigger>
      <DialogContent variant="retro">
        <DialogHeader>
          <DialogTitle>RETRO DIALOG</DialogTitle>
          <DialogDescription>
            Retro style with square borders.
          </DialogDescription>
        </DialogHeader>
        <div style="padding: 1rem 0;">
          <p>Dialog content with the retro variant.</p>
        </div>
        <DialogFooter>
          <DialogClose for="dialog-retro">
            <Button variant="retro">CLOSE</Button>
          </DialogClose>
        </DialogFooter>
      </DialogContent>
    </DialogComponent>
  </div>

  <h3>Modern</h3>
  <div class="demo-section">
    <DialogComponent variant="modern" id="dialog-modern">
      <DialogTrigger for="dialog-modern">
        <Button variant="modern">Modern</Button>
      </DialogTrigger>
      <DialogContent variant="modern">
        <DialogHeader>
          <DialogTitle>Modern Dialog</DialogTitle>
          <DialogDescription>
            Modern style with glassmorphism.
          </DialogDescription>
        </DialogHeader>
        <div style="padding: 1rem 0;">
          <p>Dialog content with the modern variant.</p>
        </div>
        <DialogFooter>
          <DialogClose for="dialog-modern">
            <Button variant="modern">Close</Button>
          </DialogClose>
        </DialogFooter>
      </DialogContent>
    </DialogComponent>
  </div>

  <h3>Futuristic</h3>
  <div class="demo-section">
    <DialogComponent variant="futuristic" id="dialog-futuristic">
      <DialogTrigger for="dialog-futuristic">
        <Button variant="futuristic">Futuristic</Button>
      </DialogTrigger>
      <DialogContent variant="futuristic">
        <DialogHeader>
          <DialogTitle>FUTURISTIC DIALOG</DialogTitle>
          <DialogDescription>
            Futuristic style with neon effects.
          </DialogDescription>
        </DialogHeader>
        <div style="padding: 1rem 0;">
          <p>Dialog content with the futuristic variant.</p>
        </div>
        <DialogFooter>
          <DialogClose for="dialog-futuristic">
            <Button variant="futuristic">CLOSE</Button>
          </DialogClose>
        </DialogFooter>
      </DialogContent>
    </DialogComponent>
  </div>

  <Code
    lang="astro"
    code={`<DialogComponent variant="retro">
  <DialogTrigger asChild>
    <Button variant="retro">Retro</Button>
  </DialogTrigger>
  <DialogContent variant="retro">
    <!-- Contenu -->
  </DialogContent>
</DialogComponent>`}
  />

  <h2 id="sizes">Sizes</h2>

  <div class="demo-section">
    <DialogComponent id="dialog-small">
      <DialogTrigger for="dialog-small">
        <Button>Small</Button>
      </DialogTrigger>
      <DialogContent size="sm">
        <DialogClose for="dialog-small">×</DialogClose>
        <DialogHeader>
          <DialogTitle>Small Dialog</DialogTitle>
        </DialogHeader>
        <div style="padding: 1rem 0;">
          <p>Small size dialog.</p>
        </div>
        <DialogFooter>
          <DialogClose for="dialog-small">
            <Button>Fermer</Button>
          </DialogClose>
        </DialogFooter>
      </DialogContent>
    </DialogComponent>

    <DialogComponent id="dialog-large">
      <DialogTrigger for="dialog-large">
        <Button>Large</Button>
      </DialogTrigger>
      <DialogContent size="lg">
        <DialogClose for="dialog-large">×</DialogClose>
        <DialogHeader>
          <DialogTitle>Large Dialog</DialogTitle>
        </DialogHeader>
        <div style="padding: 1rem 0;">
          <p>Large size dialog.</p>
        </div>
        <DialogFooter>
          <DialogClose for="dialog-large">
            <Button>Fermer</Button>
          </DialogClose>
        </DialogFooter>
      </DialogContent>
    </DialogComponent>
  </div>

  <Code
    lang="astro"
    code={`<DialogContent size="sm">...</DialogContent>
<DialogContent size="md">...</DialogContent>
<DialogContent size="lg">...</DialogContent>
<DialogContent size="xl">...</DialogContent>
<DialogContent size="full">...</DialogContent>`}
  />

  <h2 id="with-form">With form</h2>

  <div class="demo-section">
    <DialogComponent id="dialog-form">
      <DialogTrigger for="dialog-form">
        <Button>Edit Profile</Button>
      </DialogTrigger>
      <DialogContent size="sm" animationDuration={250}>
        <DialogClose for="dialog-form">×</DialogClose>
        <form method="dialog" style="display: flex; flex-direction: column; gap: 1rem;">
          <DialogHeader>
            <DialogTitle>Edit Profile</DialogTitle>
            <DialogDescription>
              Make your changes and click Save.
            </DialogDescription>
          </DialogHeader>
          <div style="display: grid; gap: 1rem; padding: 1rem 0;">
            <div>
              <label for="name" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Name</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                placeholder="John Doe"
                style="width: 100%; padding: 0.5rem; border: 1px solid var(--color-border); border-radius: var(--radius-sm);"
              />
            </div>
            <div>
              <label for="email" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Email</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                placeholder="john@example.com"
                style="width: 100%; padding: 0.5rem; border: 1px solid var(--color-border); border-radius: var(--radius-sm);"
              />
            </div>
          </div>
          <DialogFooter>
            <DialogClose for="dialog-form">
              <Button>Cancel</Button>
            </DialogClose>
            <Button type="submit">Save</Button>
          </DialogFooter>
        </form>
      </DialogContent>
    </DialogComponent>
  </div>

  <Code
    lang="astro"
    code={`<DialogComponent>
  <DialogTrigger asChild>
    <Button>Edit Profile</Button>
  </DialogTrigger>
  <DialogContent>
    <form method="dialog">
      <DialogHeader>
        <DialogTitle>Edit Profile</DialogTitle>
        <DialogDescription>
          Make your changes.
        </DialogDescription>
      </DialogHeader>
      <!-- Form fields -->
      <DialogFooter>
        <DialogClose asChild>
          <Button>Cancel</Button>
        </DialogClose>
        <Button type="submit">Save</Button>
      </DialogFooter>
    </form>
  </DialogContent>
</DialogComponent>`}
  />

  <h2 id="external-trigger">External trigger</h2>

  <p>
    You can use multiple triggers for the same dialog by using the <code class="inline-code">id</code> prop on Dialog and <code class="inline-code">for</code> on external triggers.
  </p>

  <div class="demo-section">
    <DialogComponent id="external-dialog">
      <DialogTrigger for="external-dialog">
        <Button>Internal Trigger</Button>
      </DialogTrigger>
      <DialogContent>
        <DialogClose for="external-dialog">×</DialogClose>
        <DialogHeader>
          <DialogTitle>Dialog with multiple triggers</DialogTitle>
          <DialogDescription>
            This dialog can be opened by multiple buttons.
          </DialogDescription>
        </DialogHeader>
        <div style="padding: 1rem 0;">
          <p>You opened this dialog with one of the two triggers.</p>
        </div>
        <DialogFooter>
          <DialogClose for="external-dialog">
            <Button>Close</Button>
          </DialogClose>
        </DialogFooter>
      </DialogContent>
    </DialogComponent>

    <DialogTrigger for="external-dialog">
      <Button variant="modern">External Trigger</Button>
    </DialogTrigger>
  </div>

  <Code
    lang="astro"
    code={`<DialogComponent id="my-dialog">
  <DialogTrigger asChild>
    <Button>Internal Trigger</Button>
  </DialogTrigger>
  <DialogContent>
    <!-- Contenu -->
  </DialogContent>
</DialogComponent>

<!-- External trigger -->
<DialogTrigger for="my-dialog" asChild>
  <Button>External Trigger</Button>
</DialogTrigger>`}
  />

  <h2 id="api">API Reference</h2>

  <h3>Dialog</h3>
  <p>Root component that contains all other dialog components.</p>
  <ul>
    <li><code class="inline-code">variant</code>: "initial" | "retro" | "modern" | "futuristic" (default: "initial")</li>
    <li><code class="inline-code">id</code>: Unique identifier for external triggers</li>
    <li><code class="inline-code">class</code>: Additional CSS classes</li>
  </ul>

  <h3>DialogTrigger</h3>
  <p>Button that opens the dialog.</p>
  <ul>
    <li><code class="inline-code">asChild</code>: Use the child as the trigger instead of a button</li>
    <li><code class="inline-code">for</code>: ID of the dialog to open (for external triggers)</li>
    <li><code class="inline-code">class</code>: Additional CSS classes</li>
  </ul>

  <h3>DialogContent</h3>
  <p>Container for the dialog content.</p>
  <ul>
    <li><code class="inline-code">variant</code>: Visual style (initial, retro, modern, futuristic)</li>
    <li><code class="inline-code">size</code>: Size (sm, md, lg, xl, full)</li>
    <li><code class="inline-code">animationDuration</code>: Animation duration in ms (default: 200)</li>
    <li><code class="inline-code">class</code>: Additional CSS classes</li>
  </ul>

  <h3>DialogHeader / DialogFooter</h3>
  <p>Containers for the dialog header and footer.</p>
  <ul>
    <li><code class="inline-code">class</code>: Additional CSS classes</li>
  </ul>

  <h3>DialogTitle / DialogDescription</h3>
  <p>Dialog title and description.</p>
  <ul>
    <li><code class="inline-code">class</code>: Additional CSS classes</li>
  </ul>

  <h3>DialogClose</h3>
  <p>Button that closes the dialog.</p>
  <ul>
    <li><code class="inline-code">asChild</code>: Use the child as the close button</li>
    <li><code class="inline-code">class</code>: Additional CSS classes</li>
  </ul>

  <h3>Native features</h3>
  <ul>
    <li><strong>ESC</strong>: Automatically closes the dialog</li>
    <li><strong>Backdrop</strong>: Clicking the backdrop closes the dialog</li>
    <li><strong>Focus trap</strong>: Natively handled by the browser</li>
    <li><strong>Scroll lock</strong>: Body is automatically locked</li>
    <li><strong>@starting-style</strong>: Modern native CSS animations</li>
  </ul>
</DocLayout>