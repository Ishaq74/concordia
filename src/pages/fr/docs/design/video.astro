---
import DocLayout from "@layouts/DocLayout.astro";
import { Code } from "astro:components";
import VideoComponent from "@components/ui/Video.astro";
import TableOfContents from "@/components/templates/docs/TableOfContents.astro";
import Table from "@components/ui/Table/Table.astro";
import TableHeader from "@components/ui/Table/TableHeader.astro";
import TableBody from "@components/ui/Table/TableBody.astro";
import TableRow from "@components/ui/Table/TableRow.astro";
import TableHead from "@components/ui/Table/TableHead.astro";
import TableCell from "@components/ui/Table/TableCell.astro";
---

<DocLayout 
  title="Video Component" 
  description="Lecteur vidéo avec variants et contrôles personnalisés" 
  variant="initial"
>
  <h1 id="video-component">Video Component</h1>

  <p>
    Le composant <code class="inline-code">Video</code> est un lecteur vidéo stylisé
    qui s'adapte aux différents variants de design. Il supporte tous les attributs HTML5 video
    standard et propose des styles cohérents avec votre design system.
  </p>

  <TableOfContents
    items={[
      { label: "Installation", href: "#installation" },
      { label: "Props", href: "#props" },
      { label: "Utilisation basique", href: "#basic" },
      { label: "Variants", href: "#variants" },
      { label: "Tailles", href: "#sizes" },
      { label: "Options de lecture", href: "#options" },
      { label: "Sources multiples", href: "#multiple-sources" },
      { label: "Sous-titres", href: "#subtitles" },
      { label: "Accessibilité", href: "#accessibility" },
    ]}
    title="Table des matières"
  />

  <h2 id="installation">Installation</h2>

  <Code
    lang="astro"
    code={`import Video from '@components/ui/Video.astro';`}
  />

  <h2 id="props">Props</h2>

  <Table variant="initial">
    <TableHeader>
      <TableRow>
        <TableHead>Prop</TableHead>
        <TableHead>Type</TableHead>
        <TableHead>Default</TableHead>
        <TableHead>Description</TableHead>
      </TableRow>
    </TableHeader>
    <TableBody>
      <TableRow>
        <TableCell><code class="inline-code">variant</code></TableCell>
        <TableCell><code class="inline-code">"initial" | "retro" | "modern" | "futuristic"</code></TableCell>
        <TableCell><code class="inline-code">"initial"</code></TableCell>
        <TableCell>Le style visuel du lecteur vidéo</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">src</code></TableCell>
        <TableCell><code class="inline-code">string</code></TableCell>
        <TableCell><em>Requis</em></TableCell>
        <TableCell>URL de la vidéo</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">poster</code></TableCell>
        <TableCell><code class="inline-code">string</code></TableCell>
        <TableCell><code class="inline-code">undefined</code></TableCell>
        <TableCell>Image d'aperçu avant lecture</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">width</code></TableCell>
        <TableCell><code class="inline-code">string</code></TableCell>
        <TableCell><code class="inline-code">"100%"</code></TableCell>
        <TableCell>Largeur du lecteur</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">height</code></TableCell>
        <TableCell><code class="inline-code">string</code></TableCell>
        <TableCell><code class="inline-code">"auto"</code></TableCell>
        <TableCell>Hauteur du lecteur</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">controls</code></TableCell>
        <TableCell><code class="inline-code">boolean</code></TableCell>
        <TableCell><code class="inline-code">true</code></TableCell>
        <TableCell>Afficher les contrôles natifs</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">autoplay</code></TableCell>
        <TableCell><code class="inline-code">boolean</code></TableCell>
        <TableCell><code class="inline-code">false</code></TableCell>
        <TableCell>Lecture automatique</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">loop</code></TableCell>
        <TableCell><code class="inline-code">boolean</code></TableCell>
        <TableCell><code class="inline-code">false</code></TableCell>
        <TableCell>Lecture en boucle</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">muted</code></TableCell>
        <TableCell><code class="inline-code">boolean</code></TableCell>
        <TableCell><code class="inline-code">false</code></TableCell>
        <TableCell>Vidéo muette</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">preload</code></TableCell>
        <TableCell><code class="inline-code">"none" | "metadata" | "auto"</code></TableCell>
        <TableCell><code class="inline-code">"metadata"</code></TableCell>
        <TableCell>Stratégie de préchargement</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">className</code></TableCell>
        <TableCell><code class="inline-code">string</code></TableCell>
        <TableCell><code class="inline-code">""</code></TableCell>
        <TableCell>Classes CSS additionnelles</TableCell>
      </TableRow>
      <TableRow>
        <TableCell><code class="inline-code">ariaLabel</code></TableCell>
        <TableCell><code class="inline-code">string</code></TableCell>
        <TableCell><code class="inline-code">undefined</code></TableCell>
        <TableCell>Label d'accessibilité</TableCell>
      </TableRow>
    </TableBody>
  </Table>

  <h2 id="basic">Utilisation basique</h2>

  <div class="demo-section">
    <VideoComponent 
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
      poster="https://peach.blender.org/wp-content/uploads/title_anouncement.jpg?x11217"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  src="video.mp4"
  poster="thumbnail.jpg"
/>`}
  />

  <h2 id="variants">Variants</h2>

  <h3>Initial</h3>
  <div class="demo-section">
    <VideoComponent 
      variant="initial"
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
      poster="https://peach.blender.org/wp-content/uploads/title_anouncement.jpg?x11217"
      width="600px"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  variant="initial"
  src="video.mp4"
  poster="thumbnail.jpg"
  width="600px"
/>`}
  />

  <h3>Retro</h3>
  <div class="demo-section">
    <VideoComponent 
      variant="retro"
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
      poster="https://peach.blender.org/wp-content/uploads/title_anouncement.jpg?x11217"
      width="600px"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  variant="retro"
  src="video.mp4"
  poster="thumbnail.jpg"
  width="600px"
/>`}
  />

  <h3>Modern</h3>
  <div class="demo-section">
    <VideoComponent 
      variant="modern"
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
      poster="https://peach.blender.org/wp-content/uploads/title_anouncement.jpg?x11217"
      width="600px"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  variant="modern"
  src="video.mp4"
  poster="thumbnail.jpg"
  width="600px"
/>`}
  />

  <h3>Futuristic</h3>
  <div class="demo-section">
    <VideoComponent 
      variant="futuristic"
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
      poster="https://peach.blender.org/wp-content/uploads/title_anouncement.jpg?x11217"
      width="600px"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  variant="futuristic"
  src="video.mp4"
  poster="thumbnail.jpg"
  width="600px"
/>`}
  />

  <h2 id="sizes">Tailles</h2>

  <h3>Pleine largeur</h3>
  <div class="demo-section">
    <VideoComponent 
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"
      poster="https://peach.blender.org/wp-content/uploads/title_anouncement.jpg?x11217"
      width="100%"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  src="video.mp4"
  width="100%"
/>`}
  />

  <h3>Tailles personnalisées</h3>
  <div class="demo-section">
    <VideoComponent 
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4"
      poster="https://peach.blender.org/wp-content/uploads/title_anouncement.jpg?x11217"
      width="400px"
      height="300px"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  src="video.mp4"
  width="400px"
  height="300px"
/>`}
  />

  <h2 id="options">Options de lecture</h2>

  <h3>Lecture automatique en boucle</h3>
  <div class="demo-section">
    <VideoComponent 
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4"
      autoplay
      loop
      muted
      width="500px"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  src="video.mp4"
  autoplay
  loop
  muted
  width="500px"
/>`}
  />

  <h3>Sans contrôles</h3>
  <div class="demo-section">
    <VideoComponent 
      src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4"
      controls={false}
      width="500px"
    />
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent 
  src="video.mp4"
  controls={false}
  width="500px"
/>`}
  />

  <h2 id="multiple-sources">Sources multiples</h2>

  <p>
    Utilisez le slot <code class="inline-code">source</code> pour fournir
    plusieurs formats vidéo pour une meilleure compatibilité navigateur.
  </p>

  <div class="demo-section">
    <VideoComponent variant="modern" width="600px" src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4">
      <source slot="source" src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4" />
      <source slot="source" src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/webm" />
    </VideoComponent>
  </div>

  <Code
    lang="astro"
    code={`<VideoComponent variant="modern" width="600px">
  <source slot="source" src="video.mp4" type="video/mp4" />
  <source slot="source" src="video.webm" type="video/webm" />
  <source slot="source" src="video.ogv" type="video/ogg" />
</VideoComponent>`}
  />

  <h2 id="subtitles">Sous-titres</h2>

  <p>
    Utilisez le slot <code class="inline-code">track</code> pour ajouter
    des sous-titres ou descriptions.
  </p>

  <Code
    lang="astro"
    code={`<VideoComponent src="video.mp4" width="600px">
  <track 
    slot="track"
    kind="subtitles"
    src="subtitles-fr.vtt"
    srclang="fr"
    label="Français"
    default
  />
  <track 
    slot="track"
    kind="subtitles"
    src="subtitles-en.vtt"
    srclang="en"
    label="English"
  />
</VideoComponent>`}
  />

  <h2 id="accessibility">Accessibilité</h2>

  <p>
    Le composant <code class="inline-code">Video</code> respecte les meilleures pratiques d'accessibilité :
  </p>

  <ul>
    <li>
      <strong>Attribut aria-label :</strong> Permet de décrire le contenu de la vidéo
    </li>
    <li>
      <strong>Contrôles natifs :</strong> Accessibles au clavier et aux lecteurs d'écran
    </li>
    <li>
      <strong>Support des sous-titres :</strong> Via les éléments <code class="inline-code">&lt;track&gt;</code>
    </li>
    <li>
      <strong>Poster frame :</strong> Donne un aperçu visuel du contenu avant la lecture
    </li>
    <li>
      <strong>Message de fallback :</strong> Pour les navigateurs ne supportant pas la vidéo
    </li>
  </ul>

  <h3>Exemple accessible complet</h3>

  <Code
    lang="astro"
    code={`<VideoComponent 
  src="presentation.mp4"
  poster="presentation-thumbnail.jpg"
  ariaLabel="Présentation de notre nouveau produit, durée 5 minutes"
  width="100%"
>
  <source slot="source" src="presentation.mp4" type="video/mp4" />
  <source slot="source" src="presentation.webm" type="video/webm" />
  
  <track 
    slot="track"
    kind="subtitles"
    src="subtitles-fr.vtt"
    srclang="fr"
    label="Français"
    default
  />
  <track 
    slot="track"
    kind="descriptions"
    src="audio-description-fr.vtt"
    srclang="fr"
    label="Audio description"
  />
</VideoComponent>`}
  />
</DocLayout>