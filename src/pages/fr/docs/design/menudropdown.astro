---
import DocLayout from "@layouts/DocLayout.astro";
import MenuDropdown from "@components/ui/MenuDropdown.astro";
import Table from "@components/ui/Table/Table.astro";
import TableHeader from "@components/ui/Table/TableHeader.astro";
import TableBody from "@components/ui/Table/TableBody.astro";
import TableRow from "@components/ui/Table/TableRow.astro";
import TableHead from "@components/ui/Table/TableHead.astro";
import TableCell from "@components/ui/Table/TableCell.astro";
import { Code } from "astro:components";
---

<DocLayout
  title="MenuDropdown"
  description="Composant menu déroulant accessible, multi-niveaux, conforme design system"
  variant="initial"
>
  <h1 id="menu-dropdown">MenuDropdown</h1>

  <p>
    Le composant <code class="inline-code">MenuDropdown</code> est un menu déroulant
    ultra-complet fonctionnant <strong>SANS JavaScript</strong>. Il supporte
    l'ouverture au survol (desktop), le clic (mobile), l'exclusion mutuelle, la
    fermeture au clic à l'extérieur et une vue accordéon optimisée pour le
    mobile.
  </p>

  <h2 id="installation">Installation</h2>

  <p>
    Le composant se trouve dans <code class="inline-code"
      >src/components/ui/MenuDropdown.astro</code
    >
  </p>

  <Code
    lang="typescript"
    code={`import MenuDropdown from '@components/ui/MenuDropdown.astro';`}
  />

  <h2 id="props">Props</h2>

  <div class="props-table">
    <Table striped>
      <TableHeader>
        <TableRow>
          <TableHead>Prop</TableHead>
          <TableHead>Type</TableHead>
          <TableHead>Défaut</TableHead>
          <TableHead>Description</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        <TableRow>
          <TableCell><code class="inline-code">items</code></TableCell>
          <TableCell>MenuDropdownItem[]</TableCell>
          <TableCell>—</TableCell>
          <TableCell
            >Structure du menu (obligatoire). Jusqu'à 3 niveaux supportés.</TableCell
          >
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">variant</code></TableCell>
          <TableCell>initial | retro | modern | futuristic</TableCell>
          <TableCell>initial</TableCell>
          <TableCell>Style visuel</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">position</code></TableCell>
          <TableCell
            >bottom-left | bottom-right | top-left | top-right</TableCell
          >
          <TableCell>bottom-left</TableCell>
          <TableCell>Positionnement absolu par rapport au trigger</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">openOnHover</code></TableCell>
          <TableCell>boolean</TableCell>
          <TableCell>false</TableCell>
          <TableCell>Ouverture au survol (uniquement desktop)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">isMenuMobile</code></TableCell>
          <TableCell>boolean</TableCell>
          <TableCell>false</TableCell>
          <TableCell
            >Mode "Accordion" intégré pour les menus de navigation (sans
            bordures, hauteur fluide)</TableCell
          >
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">groupName</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>"default-dropdown-group"</TableCell>
          <TableCell
            >Nom du groupe pour l'exclusion mutuelle (un seul menu ouvert à la
            fois dans le groupe)</TableCell
          >
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">triggerLabel</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>"Menu"</TableCell>
          <TableCell>Texte du bouton trigger</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">triggerIcon</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>—</TableCell>
          <TableCell>Icône (SVG string)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">class</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>—</TableCell>
          <TableCell>Classes CSS personnalisées</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </div>

  <h2 id="features">Fonctionnalités "Master" (Zero-JS)</h2>
  <ul>
    <li>
      <strong>Exclusion Mutuelle</strong> : Ouvrir un menu ferme automatiquement les
      autres (via Radio Hack).
    </li>
    <li>
      <strong>Clic Extérieur</strong> : Se ferme si on clique n'importe où ailleurs
      (via Backdrop CSS).
    </li>
    <li>
      <strong>Mode Mobile</strong> : Bascule automatiquement en mode accordéon vertical
      sur mobile.
    </li>
    <li>
      <strong>Zéro JavaScript</strong> : Garanti, même pour l'exclusion mutuelle complexe.
    </li>
  </ul>

  <h2 id="variants">Variants</h2>

  <h3>Initial (par défaut)</h3>
  <div class="example-section">
    <MenuDropdown
      items={[
        { label: "Un", href: "#" },
        { label: "Deux", href: "#" },
      ]}
      variant="initial"
    />
  </div>

  <Code
    lang="astro"
    code={`<MenuDropdown items={[{ label: 'Un', href: '#' }, { label: 'Deux', href: '#' }]} variant="initial" />`}
  />

  <h3>Retro</h3>
  <div class="example-section">
    <MenuDropdown
      items={[{ label: "Un" }, { label: "Deux" }]}
      variant="retro"
    />
  </div>

  <Code
    lang="astro"
    code={`<MenuDropdown items={[{ label: 'Un' }, { label: 'Deux' }]} variant="retro" />`}
  />

  <h3>Modern</h3>
  <div class="example-section">
    <MenuDropdown
      items={[{ label: "Un" }, { label: "Deux" }]}
      variant="modern"
    />
  </div>

  <h3>Futuristic</h3>
  <div class="example-section">
    <MenuDropdown
      items={[{ label: "Un" }, { label: "Deux" }]}
      variant="futuristic"
    />
  </div>

  <h2 id="usage">Utilisation</h2>

  <p>
    Les menus imbriqués sont supportés en fournissant un tableau <code
      >children</code
    > sur un item.
  </p>

  <h3>Exemple avec sous-menus</h3>
  <div class="example-section">
    <MenuDropdown
      items={[
        { label: "Accueil", href: "/" },
        {
          label: "Produits",
          children: [
            { label: "Catégorie 1", href: "/cat1" },
            { label: "Catégorie 2", href: "/cat2" },
            { label: "Catégorie 3", href: "/cat3" },
          ],
        },
        {
          label: "Services",
          children: [
            { label: "Conseil", href: "/conseil" },
            { label: "Développement", href: "/dev" },
          ],
        },
        { label: "Contact", href: "/contact" },
      ]}
      triggerLabel="Menu Navigation"
      variant="initial"
    />
  </div>

  <Code
    lang="astro"
    code={`<MenuDropdown
  items={[
    { label: 'Accueil', href: '/' },
    { label: 'Produits', children: [
      { label: 'Catégorie 1', href: '/cat1' },
      { label: 'Catégorie 2', href: '/cat2' },
    ]},
    { label: 'Contact', href: '/contact' },
  ]}
  triggerLabel="Menu"
/>`}
  />

  <h3>Mode hover (openOnHover)</h3>
  <p>Le menu peut s'ouvrir automatiquement au survol :</p>
  <div class="example-section">
    <MenuDropdown
      items={[
        {
          label: "Fichier",
          children: [
            { label: "Nouveau", href: "#" },
            { label: "Ouvrir", href: "#" },
            { label: "Enregistrer", href: "#" },
          ],
        },
        {
          label: "Edition",
          children: [
            { label: "Copier", href: "#" },
            { label: "Coller", href: "#" },
          ],
        },
      ]}
      triggerLabel="Ouvrir au survol"
      openOnHover={true}
    />
  </div>

  <Code
    lang="astro"
    code={`<MenuDropdown
  items={[...]}
  openOnHover={true}
/>`}
  />

  <h3>Toutes les positions</h3>
  <div
    class="example-section"
    style="display: flex; gap: 1rem; flex-wrap: wrap;"
  >
    <MenuDropdown
      items={[
        { label: "Option 1", href: "#" },
        { label: "Option 2", href: "#" },
        { label: "Option 3", href: "#" },
      ]}
      triggerLabel="Bottom Left"
      position="bottom-left"
    />
    <MenuDropdown
      items={[
        { label: "Option 1", href: "#" },
        { label: "Option 2", href: "#" },
        { label: "Option 3", href: "#" },
      ]}
      triggerLabel="Bottom Right"
      position="bottom-right"
    />
    <MenuDropdown
      items={[
        { label: "Option 1", href: "#" },
        { label: "Option 2", href: "#" },
        { label: "Option 3", href: "#" },
      ]}
      triggerLabel="Top Left"
      position="top-left"
    />
    <MenuDropdown
      items={[
        { label: "Option 1", href: "#" },
        { label: "Option 2", href: "#" },
        { label: "Option 3", href: "#" },
      ]}
      triggerLabel="Top Right"
      position="top-right"
    />
  </div>

  <h2 id="accessibility">Accessibilité</h2>
  <ul>
    <li>
      Interaction clavier native via <code>details</code>/<code>summary</code>.
    </li>
    <li>
      Utilisation des rôles ARIA (<code>role="menu"</code>, <code
        >role="menuitem"</code
      >).
    </li>
    <li>Éléments focusables et styles de focus visible.</li>
    <li>Support tactile optimisé (min-height 44px).</li>
    <li>Responsive : empile les sous-menus verticalement sur mobile.</li>
  </ul>

  <h2 id="notes">Notes techniques</h2>
  <ul>
    <li>
      <strong>Pure CSS</strong> : Aucun JavaScript requis pour le fonctionnement de
      base.
    </li>
    <li>
      <strong>Animations</strong> : Transitions fluides avec <code>slideIn</code
      > keyframe.
    </li>
    <li><strong>Dark mode</strong> : Support automatique du thème sombre.</li>
    <li><strong>Touch-friendly</strong> : Cibles touch de 44px minimum.</li>
  </ul>
</DocLayout>
