---
import DocLayout from "@layouts/DocLayout.astro";
import { Code } from "astro:components";
import PaginationComponent from "@components/ui/Pagination.astro";
import TableOfContents from "@/components/templates/docs/TableOfContents.astro";
import Table from "@components/ui/Table/Table.astro";
import TableHeader from "@components/ui/Table/TableHeader.astro";
import TableBody from "@components/ui/Table/TableBody.astro";
import TableRow from "@components/ui/Table/TableRow.astro";
import TableHead from "@components/ui/Table/TableHead.astro";
import TableCell from "@components/ui/Table/TableCell.astro";
---

<DocLayout 
  title="Pagination Component" 
  description="Documentation du composant Pagination pour la navigation entre pages"
  variant="initial"
>
  <h1 id="pagination-component">Pagination Component</h1>
  
  <p>
    Le composant <code class="inline-code">Pagination</code> permet de naviguer entre plusieurs pages de contenu
    avec une gestion intelligente de l'affichage des numéros et des boutons de navigation.
  </p>

  <TableOfContents
    items={[
      { label: "Installation", href: "#installation" },
      { label: "Props", href: "#props" },
      { label: "Utilisation basique", href: "#basic" },
      { label: "Variants", href: "#variants" },
      { label: "Couleurs", href: "#colors" },
      { label: "Tailles", href: "#sizes" },
      { label: "Options avancées", href: "#options" },
      { label: "Accessibilité", href: "#accessibility" },
    ]}
    title="Table des matières"
  />

  <h2 id="installation">Installation</h2>

  <Code
    lang="astro"
    code={`import Pagination from '@components/ui/Pagination.astro';`}
  />

  <h2 id="props">Props</h2>

  <div class="props-table">
    <Table striped>
      <TableHeader>
        <TableRow>
          <TableHead>Prop</TableHead>
          <TableHead>Type</TableHead>
          <TableHead>Défaut</TableHead>
          <TableHead>Description</TableHead>
        </TableRow>
      </TableHeader>
      <TableBody>
        <TableRow>
          <TableCell><code class="inline-code">currentPage</code></TableCell>
          <TableCell>number</TableCell>
          <TableCell>-</TableCell>
          <TableCell>Page actuelle (1-based, requis)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">totalPages</code></TableCell>
          <TableCell>number</TableCell>
          <TableCell>-</TableCell>
          <TableCell>Nombre total de pages (requis)</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">baseUrl</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>"#"</TableCell>
          <TableCell>URL de base pour les liens</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">variant</code></TableCell>
          <TableCell>initial | retro | modern | futuristic</TableCell>
          <TableCell>initial</TableCell>
          <TableCell>Style visuel de la pagination</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">color</code></TableCell>
          <TableCell>default | primary | secondary | accent</TableCell>
          <TableCell>default</TableCell>
          <TableCell>Couleur de la page active</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">size</code></TableCell>
          <TableCell>sm | md | lg</TableCell>
          <TableCell>md</TableCell>
          <TableCell>Taille des boutons</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">showPrevNext</code></TableCell>
          <TableCell>boolean</TableCell>
          <TableCell>true</TableCell>
          <TableCell>Afficher les boutons précédent/suivant</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">showFirstLast</code></TableCell>
          <TableCell>boolean</TableCell>
          <TableCell>false</TableCell>
          <TableCell>Afficher les boutons première/dernière page</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">siblingCount</code></TableCell>
          <TableCell>number</TableCell>
          <TableCell>1</TableCell>
          <TableCell>Nombre de pages de chaque côté de la page courante</TableCell>
        </TableRow>
        <TableRow>
          <TableCell><code class="inline-code">className</code></TableCell>
          <TableCell>string</TableCell>
          <TableCell>""</TableCell>
          <TableCell>Classes CSS additionnelles</TableCell>
        </TableRow>
      </TableBody>
    </Table>
  </div>

  <h2 id="basic">Utilisation basique</h2>

  <p>Exemple simple avec 10 pages, page 5 active :</p>

  <div class="example-section">
    <PaginationComponent currentPage={5} totalPages={10} />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent currentPage={5} totalPages={10} />`}
  />

  <h3>Gestion automatique des cas limites</h3>

  <p>Page 1 (pas de bouton précédent) :</p>
  <div class="example-section">
    <PaginationComponent currentPage={1} totalPages={10} />
  </div>

  <p>Page 10 (pas de bouton suivant) :</p>
  <div class="example-section">
    <PaginationComponent currentPage={10} totalPages={10} />
  </div>

  <p>Page unique (pas de navigation) :</p>
  <div class="example-section">
    <PaginationComponent currentPage={1} totalPages={1} />
  </div>

  <Code
    lang="astro"
    code={`<!-- Désactivation automatique selon le contexte -->
<PaginationComponent currentPage={1} totalPages={10} />
<PaginationComponent currentPage={10} totalPages={10} />
<PaginationComponent currentPage={1} totalPages={1} />`}
  />

  <h2 id="variants">Variants</h2>

  <h3>Initial (défaut)</h3>
  <div class="example-section">
    <PaginationComponent variant="initial" currentPage={3} totalPages={10} />
  </div>

  <h3>Retro</h3>
  <div class="example-section">
    <PaginationComponent variant="retro" currentPage={3} totalPages={10} />
  </div>

  <h3>Modern</h3>
  <div class="example-section">
    <PaginationComponent variant="modern" currentPage={3} totalPages={10} />
  </div>

  <h3>Futuristic</h3>
  <div class="example-section">
    <PaginationComponent variant="futuristic" currentPage={3} totalPages={10} />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent variant="initial" currentPage={3} totalPages={10} />
<PaginationComponent variant="retro" currentPage={3} totalPages={10} />
<PaginationComponent variant="modern" currentPage={3} totalPages={10} />
<PaginationComponent variant="futuristic" currentPage={3} totalPages={10} />`}
  />

  <h2 id="colors">Couleurs</h2>

  <p>Les couleurs s'appliquent à la page active :</p>

  <div class="example-section">
    <div style="display: flex; flex-direction: column; gap: 2rem;">
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Default</p>
        <PaginationComponent color="default" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Primary</p>
        <PaginationComponent color="primary" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Secondary</p>
        <PaginationComponent color="secondary" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Accent</p>
        <PaginationComponent color="accent" currentPage={5} totalPages={10} />
      </div>
    </div>
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent color="default" currentPage={5} totalPages={10} />
<PaginationComponent color="primary" currentPage={5} totalPages={10} />
<PaginationComponent color="secondary" currentPage={5} totalPages={10} />
<PaginationComponent color="accent" currentPage={5} totalPages={10} />`}
  />

  <h2 id="sizes">Tailles</h2>

  <div class="example-section">
    <div style="display: flex; flex-direction: column; gap: 2rem;">
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Small</p>
        <PaginationComponent size="sm" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Medium (défaut)</p>
        <PaginationComponent size="md" currentPage={5} totalPages={10} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Large</p>
        <PaginationComponent size="lg" currentPage={5} totalPages={10} />
      </div>
    </div>
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent size="sm" currentPage={5} totalPages={10} />
<PaginationComponent size="md" currentPage={5} totalPages={10} />
<PaginationComponent size="lg" currentPage={5} totalPages={10} />`}
  />

  <h2 id="options">Options avancées</h2>

  <h3>Avec boutons première/dernière page</h3>
  <div class="example-section">
    <PaginationComponent currentPage={5} totalPages={20} showFirstLast={true} />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent currentPage={5} totalPages={20} showFirstLast={true} />`}
  />

  <h3>Sans boutons précédent/suivant</h3>
  <div class="example-section">
    <PaginationComponent currentPage={5} totalPages={10} showPrevNext={false} />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent currentPage={5} totalPages={10} showPrevNext={false} />`}
  />

  <h3>Plus de pages visibles (siblingCount)</h3>
  <div class="example-section">
    <div style="display: flex; flex-direction: column; gap: 2rem;">
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">siblingCount={1} (défaut)</p>
        <PaginationComponent currentPage={10} totalPages={20} siblingCount={1} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">siblingCount={2}</p>
        <PaginationComponent currentPage={10} totalPages={20} siblingCount={2} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">siblingCount={3}</p>
        <PaginationComponent currentPage={10} totalPages={20} siblingCount={3} />
      </div>
    </div>
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent currentPage={10} totalPages={20} siblingCount={1} />
<PaginationComponent currentPage={10} totalPages={20} siblingCount={2} />
<PaginationComponent currentPage={10} totalPages={20} siblingCount={3} />`}
  />

  <h3>Affichage intelligent avec "..."</h3>
  <p>Le composant affiche automatiquement "..." quand il y a beaucoup de pages :</p>
  
  <div class="example-section">
    <div style="display: flex; flex-direction: column; gap: 2rem;">
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Début (page 2)</p>
        <PaginationComponent currentPage={2} totalPages={50} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Milieu (page 25)</p>
        <PaginationComponent currentPage={25} totalPages={50} />
      </div>
      
      <div>
        <p style="margin-bottom: 0.5rem; font-weight: 600;">Fin (page 49)</p>
        <PaginationComponent currentPage={49} totalPages={50} />
      </div>
    </div>
  </div>

  <h3>URL personnalisée</h3>
  <Code
    lang="astro"
    code={`<!-- Avec pattern [page] -->
<PaginationComponent 
  currentPage={5} 
  totalPages={10} 
  baseUrl="/blog/page/[page]" 
/>
<!-- Résultat: /blog/page/1, /blog/page/2, etc. -->

<!-- Avec concaténation simple -->
<PaginationComponent 
  currentPage={5} 
  totalPages={10} 
  baseUrl="/blog/page/" 
/>
<!-- Résultat: /blog/page/1, /blog/page/2, etc. -->`}
  />

  <h2 id="accessibility">Accessibilité</h2>

  <ul>
    <li><strong>Navigation sémantique :</strong> Utilise <code class="inline-code">&lt;nav&gt;</code> avec <code class="inline-code">aria-label="Pagination"</code></li>
    <li><strong>État actuel :</strong> <code class="inline-code">aria-current="page"</code> sur la page active</li>
    <li><strong>Désactivation :</strong> <code class="inline-code">aria-disabled</code> et <code class="inline-code">tabindex="-1"</code> sur les liens désactivés</li>
    <li><strong>Labels clairs :</strong> <code class="inline-code">aria-label</code> sur tous les liens (Première page, Page 5, etc.)</li>
    <li><strong>Keyboard :</strong> Navigation complète au clavier avec Tab</li>
    <li><strong>Gestion intelligente :</strong> Désactivation automatique si totalPages = 0, 1, ou si currentPage est invalide</li>
  </ul>

  <h2>Logique intelligente</h2>

  <ul>
    <li><strong>0 pages :</strong> Rien ne s'affiche</li>
    <li><strong>1 page :</strong> Affiche seulement la page 1 (pas de navigation)</li>
    <li><strong>≤ 7 pages :</strong> Affiche toutes les pages</li>
    <li><strong>&gt; 7 pages :</strong> Utilise "..." intelligemment</li>
    <li><strong>Validation :</strong> currentPage est automatiquement normalisé entre 1 et totalPages</li>
    <li><strong>Bouton précédent :</strong> Désactivé automatiquement sur la page 1</li>
    <li><strong>Bouton suivant :</strong> Désactivé automatiquement sur la dernière page</li>
  </ul>

  <h2>Exemple complet</h2>

  <div class="example-section">
    <PaginationComponent 
      variant="modern"
      color="primary"
      size="lg"
      currentPage={12}
      totalPages={50}
      showFirstLast={true}
      siblingCount={2}
    />
  </div>

  <Code
    lang="astro"
    code={`<PaginationComponent 
  variant="modern"
  color="primary"
  size="lg"
  currentPage={12}
  totalPages={50}
  showFirstLast={true}
  siblingCount={2}
  baseUrl="/blog/page/[page]"
/>`}
  />

  <h2>Utilisation avec Astro</h2>

  <Code
    lang="astro"
    code={`---
// pages/blog/[page].astro
import Pagination from '@components/ui/Pagination.astro';

const currentPage = Number(Astro.params.page || 1);
const postsPerPage = 10;
const totalPosts = 245;
const totalPages = Math.ceil(totalPosts / postsPerPage);

const posts = await getPostsForPage(currentPage, postsPerPage);
---

<div>
  {posts.map(post => (
    <article>{post.title}</article>
  ))}
</div>

<PaginationComponent 
  currentPage={currentPage}
  totalPages={totalPages}
  baseUrl="/blog/"
  variant="modern"
  color="primary"
/>`}
  />
</DocLayout>